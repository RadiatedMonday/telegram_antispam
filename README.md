Шаг 1 - добавление бота в группы
Добавьте антиспам бота в группу, где он будет модерировать сообщения, и в закрытую группу, куда он будет пересылать результат своей работы.

Важно сразу сделать его администратором. Это изменит ID-группы, которое нам понадобится для развертывания бота.

1) Добавить бота в чат, где он будет выполнять свои основные функции по защите чата от спамеров нужно со следующими правами:

Удаление сообщений

Блокировка пользователей

Анонимность (опционально), чтобы бот писал от имени группы

2) Добавить бота в чат журнала (другая группа с ботом, где вы следите за его работой). 

Шаг 2 - добавление переменных
Добавить переменные (ID групп, токен бота и т. д.). Это необходимо, чтобы бот понимал, какие группы мониторить и куда отсылать сообщения на модерацию.

Для функционирования бота необходимо добавить следующие переменные окружения:

CHAT_IDS — айди основного чата, где будут классифицироваться сообщения.

Подсказка — ID канала можно получить, используя обращение к телеграм в таком формате:
Берем токен вставляем его в следующую строку вместо строки {token}
https://api.telegram.org/bot{token}/getUpdates
отправляем запрос через браузер и получаем ответ, среди полученных ботом сообщений ищем нужные id.

ID имеет следующий формат -1002284505443 (не забудьте про минус в начале, он нужен!)

JOURNAL_CHAT_ID — айди чата‑журнала (Создайте закрытый чат, где вы будете модерировать сообщения), куда бот будет отправлять свои действия (там вы сможете управлять ими: блокировать автора сообщения или отмечать срабатывание как ложное).

Получить ID можно аналогично предыдущему пункту.

DATASET_PATH — абсолютный или относительный путь до файла data.txt.

TOKEN — токен бота телеграм (берется у @BotFather)

CHANNEL_ID — айди основного канала, чьи сообщения не нужно удалять. Это связано с тем, что если не указать этот параметр, сообщения привязанного канала, которые дублируются в привязанный чат при создании поста в основном канале, будут удаляться как пересланные от канала или бота. Это важно учесть.

TF_ENABLE_ONEDNN_OPTS — задаем значение 0

Важно: переменные нужно записывать, не оборачивая их в кавычки

Датасет хранится в нашем файле data.txt  и имеет следующий формат:

<тип сообщения> <сообщение>

Естественно, без <>

Т.е. первое слово обязательно должно быть типом сообщения с маленькой буквы. Их всего два — ham и spam. Ham — обычное, не спамерское сообщение. Spam — спамерское сообщение.
Далее все слова, идущие после типа сообщения будут объединены в одно сообщение, имеющее тип, указанный первым словом. Рекомендуется использовать встроенные в бота возможности по добавлению строк. 
Cамостоятельно редактировать data.txt нужно только следуя инструкциям и формату содержания датасета.

Пример:

ham обычное не спамерское обращение

spam текст вашего спама

Важно: каждое сообщение - одна строка, то есть переносить строки нельзя! При добавлении через /add, перенос строк будет удаляться. Если строка будет начинаться со слов, отличных от ham или spam, будет ошибка.

Дообучение антиспам бота
Для этого заходим в нашу группу, где вы осуществляете модерацию и выполняете команду

/add текст сообщения который вы хотите добавить для переобучения бота
